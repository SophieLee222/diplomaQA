# План тестирования форм покупки тура

## Перечень автоматизируемых сценариев

### Сценарии доступа к формам

#### Сценарий 1. Навигация к форме покупки с дебетовой карты
1. Нажать на кнопку "Купить".
    - Ожидаемый результат: Появляется форма с названием Оплата по карте

#### Сценарий 2. Навигация к форме покупки с кредитной карты
1. Нажать на кнопку "Купить в кредит".
    - Ожидаемый результат: Появляется форма с названием Кредит по данным карты

### Сценарии оплаты дебетовой картой

#### Сценарий 3. Валидное заполнение формы
1. Заполнить поле карты валидным значением карты из 16 цифр в формате XXXX XXXX XXXX XXXX. Валидная карта, approved карта, предоставленная разработчиками - 1111 2222 3333 4444.
2. Заполнить поле месяца валидным значением в формате XX. Валидное значение месяца - текущий и последующие месяца текущего года или любой месяц нетекущего года.
3. Заполнить поле года валидным значением в формате XX. Валидное значение года - текущий и последующие года до +20 лет от текущего.
4. Заполнить поле владельца валидным значением. Валидное значение владельца - Фамилия и Имя на латиннице, например Vasya Pupkin.
5. Заполнить поле CVC валидным значением формата XXX. Валидное значение CVC - любое трехзначное число, например 958.
6. Нажать на кнопку Продолжить
    - Ожидаемый результат: 
      - Появляется уведомление "Успешно Операция одобрена банком"
      - Запрос в банковскую систему отдает статус операции "approved"

#### Сценарий 4. Declined карта
1. Заполнить поле карты значением откланенной карты из 16 цифр в формате XXXX XXXX XXXX XXXX. Откланенная карта - declined карта, предоставленная разработчиками - 5555 6666 7777 8888.
2. Заполнить поле месяца валидным значением в формате XX. Валидное значение месяца - текущий и последующие месяца текущего года или любой месяц нетекущего года.
3. Заполнить поле года валидным значением в формате XX. Валидное значение года - текущий и последующие года до +20 лет от текущего.
4. Заполнить поле владельца валидным значением. Валидное значение владельца - Фамилия и Имя на латиннице, например Vasya Pupkin.
5. Заполнить поле CVC валидным значением формата XXX. Валидное значение CVC - любое трехзначное число, например 958.
6. Нажать на кнопку Продолжить
    - Ожидаемый результат: 
      - Появляется уведомление "Ошибка Ошибка! Банк отказал в проведении операции."
      - Запрос в банковскую систему отдает статус операции "declined"

#### Сценарий 5. Невалидный формат карты
1. Заполнить поле карты невалидным значением карты. Невалидное значение карты - любое число, содержащее от одной до 15-ти цифр, например 5473.
2. Заполнить поле месяца валидным значением в формате XX. Валидное значение месяца - текущий и последующие месяца текущего года или любой месяц нетекущего года.
3. Заполнить поле года валидным значением в формате XX. Валидное значение года - текущий и последующие года до +20 лет от текущего.
4. Заполнить поле владельца валидным значением. Валидное значение владельца - Фамилия и Имя на латиннице, например Vasya Pupkin.
5. Заполнить поле CVC валидным значением формата XXX. Валидное значение CVC - любое трехзначное число, например 958.
6. Нажать на кнопку Продолжить
   - Ожидаемый результат: Под полем номера карты появляется сообщение об ошибке "Неверный формат"

#### Сценарий 6. Истекший месяц действия карты
1. Заполнить поле карты валидным значением карты из 16 цифр в формате XXXX XXXX XXXX XXXX. Валидная карта, approved карта, предоставленная разработчиками - 1111 2222 3333 4444.
2. Заполнить поле месяца значением истекшего месяца в формате XX. Истекший месяц - все месяца текущего года, предшествующие текущему. Если текущий месяц — январь, истекшим месяцем считается любой месяц прошлого года, например, 12 (декабрь).
3. Заполнить поле года валидным значением в формате XX. Валидное значение года - текущий и последующие года до +20 лет от текущего.
4. Заполнить поле владельца валидным значением. Валидное значение владельца - Фамилия и Имя на латиннице, например Vasya Pupkin.
5. Заполнить поле CVC валидным значением формата XXX. Валидное значение CVC - любое трехзначное число, например 958.
6. Нажать на кнопку Продолжить
   - Ожидаемый результат: Под полем месяца появляется сообщение об ошибке "Истёк срок действия карты"

#### Сценарий 7. Невалидный месяц действия карты
1. Заполнить поле карты валидным значением карты из 16 цифр в формате XXXX XXXX XXXX XXXX. Валидная карта, approved карта, предоставленная разработчиками - 1111 2222 3333 4444.
2. Заполнить поле месяца невалидным значением месяца в формате XX. Невалидное значение месяца - любое число от 13 до 99.
3. Заполнить поле года валидным значением в формате XX. Валидное значение года - текущий и последующие года до +20 лет от текущего.
4. Заполнить поле владельца валидным значением. Валидное значение владельца - Фамилия и Имя на латиннице, например Vasya Pupkin.
5. Заполнить поле CVC валидным значением формата XXX. Валидное значение CVC - любое трехзначное число, например 958.
6. Нажать на кнопку Продолжить
    - Ожидаемый результат: Под полем месяца появляется сообщение об ошибке "Неверно указан срок действия карты"

#### Сценарий 8. Истекший год действия карты
1. Заполнить поле карты валидным значением карты из 16 цифр в формате XXXX XXXX XXXX XXXX. Валидная карта, approved карта, предоставленная разработчиками - 1111 2222 3333 4444.
2. Заполнить поле месяца валидным значением в формате XX. Валидное значение месяца - текущий и последующие месяца текущего года или любой месяц нетекущего года.
3. Заполнить поле года значением истекшего года в формате XX. Истекший год - любой год от 2000 до года, предшествующего текущему.
4. Заполнить поле владельца валидным значением. Валидное значение владельца - Фамилия и Имя на латиннице, например Vasya Pupkin.
5. Заполнить поле CVC валидным значением формата XXX. Валидное значение CVC - любое трехзначное число, например 958.
6. Нажать на кнопку Продолжить
   - Ожидаемый результат: Под полем года появляется сообщение об ошибке "Истёк срок действия карты"

#### Сценарий 9. Невалидный год действия карты
1. Заполнить поле карты валидным значением карты из 16 цифр в формате XXXX XXXX XXXX XXXX. Валидная карта, approved карта, предоставленная разработчиками - 1111 2222 3333 4444.
2. Заполнить поле месяца валидным значением в формате XX. Валидное значение месяца - текущий и последующие месяца текущего года или любой месяц нетекущего года.
3. Заполнить поле года невалидным значением года в формате XX. Невалидное значение года - любой год текущего столетия, начиная от +21 лет к текущему году, например 85.
4. Заполнить поле владельца валидным значением. Валидное значение владельца - Фамилия и Имя на латиннице, например Vasya Pupkin.
5. Заполнить поле CVC валидным значением формата XXX. Валидное значение CVC - любое трехзначное число, например 958.
6. Нажать на кнопку Продолжить
    - Ожидаемый результат: Под полем года появляется сообщение об ошибке "Неверно указан срок действия карты"

#### Сценарий 10. Невалидный формат владельца карты
1. Заполнить поле карты валидным значением карты из 16 цифр в формате XXXX XXXX XXXX XXXX. Валидная карта, approved карта, предоставленная разработчиками - 1111 2222 3333 4444.
2. Заполнить поле месяца валидным значением в формате XX. Валидное значение месяца - текущий и последующие месяца текущего года или любой месяц нетекущего года.
3. Заполнить поле года валидным значением в формате XX. Валидное значение года - текущий и последующие года до +20 лет от текущего.
4. Заполнить поле владельца невалидным значением. Невалидное значение владельца - Фамилия и Имя на кириллице, например Вася Пупкин.
5. Заполнить поле CVC валидным значением формата XXX. Валидное значение CVC - любое трехзначное число, например 958.
6. Нажать на кнопку Продолжить
   - Ожидаемый результат: Под полем владельца появляется сообщение об ошибке "Неверный формат"

#### Сценарий 11. Невалидный формат CVC
1. Заполнить поле карты валидным значением карты из 16 цифр в формате XXXX XXXX XXXX XXXX. Валидная карта, approved карта, предоставленная разработчиками - 1111 2222 3333 4444.
2. Заполнить поле месяца валидным значением в формате XX. Валидное значение месяца - текущий и последующие месяца текущего года или любой месяц нетекущего года.
3. Заполнить поле года валидным значением в формате XX. Валидное значение года - текущий и последующие года до +20 лет от текущего.
4. Заполнить поле владельца валидным значением. Валидное значение владельца - Фамилия и Имя на латиннице, например Vasya Pupkin.
5. Заполнить поле CVC невалидным значением формата XX. Невалидное значение CVC - любое двухзначное число, например 95.
6. Нажать на кнопку Продолжить
   - Ожидаемый результат: Под полем CVC/CVV появляется сообщение об ошибке "Неверный формат"

#### Сценарий 12. Пустое поле карты
1. Оставить поле карты пустым
2. Заполнить поле месяца валидным значением в формате XX. Валидное значение месяца - текущий и последующие месяца текущего года или любой месяц нетекущего года.
3. Заполнить поле года валидным значением в формате XX. Валидное значение года - текущий и последующие года до +20 лет от текущего.
4. Заполнить поле владельца валидным значением. Валидное значение владельца - Фамилия и Имя на латиннице, например Vasya Pupkin.
5. Заполнить поле CVC валидным значением формата XXX. Валидное значение CVC - любое трехзначное число, например 958.
6. Нажать на кнопку Продолжить
   - Ожидаемый результат: Под полем номера карты появляется сообщение об ошибке "Неверный формат"

#### Сценарий 13. Пустое поле месяца действия карты
1. Заполнить поле карты валидным значением карты из 16 цифр в формате XXXX XXXX XXXX XXXX. Валидная карта, approved карта, предоставленная разработчиками - 1111 2222 3333 4444.
2. Оставить поле месяца пустым
3. Заполнить поле года валидным значением в формате XX. Валидное значение года - текущий и последующие года до +20 лет от текущего.
4. Заполнить поле владельца валидным значением. Валидное значение владельца - Фамилия и Имя на латиннице, например Vasya Pupkin.
5. Заполнить поле CVC валидным значением формата XXX. Валидное значение CVC - любое трехзначное число, например 958.
6. Нажать на кнопку Продолжить
   - Ожидаемый результат: Под полем месяца появляется сообщение об ошибке "Неверный формат"

#### Сценарий 14. Пустое поле года действия карты
1. Заполнить поле карты валидным значением карты из 16 цифр в формате XXXX XXXX XXXX XXXX. Валидная карта, approved карта, предоставленная разработчиками - 1111 2222 3333 4444.
2. Заполнить поле месяца валидным значением в формате XX. Валидное значение месяца - текущий и последующие месяца текущего года или любой месяц нетекущего года.
3. Оставить поле года пустым.
4. Заполнить поле владельца валидным значением. Валидное значение владельца - Фамилия и Имя на латиннице, например Vasya Pupkin.
5. Заполнить поле CVC валидным значением формата XXX. Валидное значение CVC - любое трехзначное число, например 958.
6. Нажать на кнопку Продолжить
   - Ожидаемый результат: Под полем года появляется сообщение об ошибке "Неверный формат"

#### Сценарий 15. Пустое поле владельца карты
1. Заполнить поле карты валидным значением карты из 16 цифр в формате XXXX XXXX XXXX XXXX. Валидная карта, approved карта, предоставленная разработчиками - 1111 2222 3333 4444.
2. Заполнить поле месяца валидным значением в формате XX. Валидное значение месяца - текущий и последующие месяца текущего года или любой месяц нетекущего года.
3. Заполнить поле года валидным значением в формате XX. Валидное значение года - текущий и последующие года до +20 лет от текущего.
4. Оставить поле владельца пустым.
5. Заполнить поле CVC валидным значением формата XXX. Валидное значение CVC - любое трехзначное число, например 958.
6. Нажать на кнопку Продолжить
   - Ожидаемый результат: Под полем владельца появляется сообщение об ошибке "Поле обязательно для заполнения"

#### Сценарий 16. Пустое поле CVC
1. Заполнить поле карты валидным значением карты из 16 цифр в формате XXXX XXXX XXXX XXXX. Валидная карта, approved карта, предоставленная разработчиками - 1111 2222 3333 4444.
2. Заполнить поле месяца валидным значением в формате XX. Валидное значение месяца - текущий и последующие месяца текущего года или любой месяц нетекущего года.
3. Заполнить поле года валидным значением в формате XX. Валидное значение года - текущий и последующие года до +20 лет от текущего.
4. Заполнить поле владельца валидным значением. Валидное значение владельца - Фамилия и Имя на латиннице, например Vasya Pupkin.
5. Оставить поле CVC пустыми
6. Нажать на кнопку Продолжить
   - Ожидаемый результат: Под полем CVC появляется сообщение об ошибке "Неверный формат"

## Перечень используемых инструментов

- **IntelliJ IDEA**  
  Мощная интегрированная среда разработки, оптимизированная для работы с Java. В данном проекте используется для написания и отладки автотестов, управления зависимостями через Gradle, а также интеграции с тестовыми фреймворками (например, JUnit и Selenide).

- **JDK (Java Development Kit)**  
  Основной инструмент разработки и выполнения Java-приложений. В проекте необходим для запуска тестов, компиляции кода и генерации отчетов.

- **Gradle**  
  Инструмент автоматизации сборки, используемый для управления зависимостями, настройки тестовых задач и выполнения автотестов в CI/CD процессах. Позволяет быстро адаптировать проект под новые требования.

- **JavaFaker**  
  Библиотека генерации тестовых данных. В рамках проекта используется для создания реалистичных данных (например, номеров карт, имен владельцев) для обеспечения качественного тестирования и снижения риска использования устаревших данных.

- **JUnit Jupiter**  
  Фреймворк для написания и выполнения модульных и интеграционных тестов. Применяется для проверки ожидаемых результатов автотестов, поддержки ассертов и гибкой настройки тестовых сценариев.

- **Selenide**  
  Библиотека автоматизации пользовательских интерфейсов. Используется для написания сценариев взаимодействия с формами покупки, обеспечивая надежное выполнение тестов в различных браузерах и простую отладку.

- **Lombok**  
  Утилита для сокращения шаблонного кода в Java-классов. Применяется для повышения читаемости и уменьшения количества кода в проекте (например, автоматическое создание геттеров, сеттеров, конструкторов).

- **Allure**  
  Инструмент визуализации отчетов о тестировании. В проекте используется для генерации удобных для анализа отчетов, включающих результаты прохождения автотестов, шаги и скриншоты ошибок.

- **Appveyor CI**  
  Платформа для непрерывной интеграции и развертывания. Применяется для автоматического запуска тестов, генерации отчетов и проверки корректности изменений в коде.

## Перечень и описание возможных рисков при автоматизации

1. **Изменение структуры страницы**
   - **Риск**: Поломка тестов из-за изменений в DOM-структуре (например, обновление полей формы).
   - **Митигирующие действия**: Использование устойчивых локаторов (XPath, CSS-селекторов) и регулярное обновление тестов при изменениях.

2. **Неполный охват тестами**
   - **Риск**: Пропуск важных сценариев, что может привести к некорректной работе форм в реальных условиях.
   - **Митигирующие действия**: Постоянный пересмотр и обновление списка тест-кейсов, анализ покрытия функционала.

3. **Сложность поддержки тестов**
   - **Риск**: Увеличение времени на обновление тестов из-за большого объема шаблонного или плохо документированного кода.
   - **Митигирующие действия**: Использование шаблонов проектирования, написание документации и структурирование тестового кода.

4. **Ошибки в тестовых данных**
   - **Риск**: Использование некорректных, устаревших или невалидных данных в тестах.
   - **Митигирующие действия**: Автоматизация генерации данных через JavaFaker и Java Random, регулярная проверка данных на актуальность.

5. **Непредвиденные ошибки в окружении**
   - **Риск**: Проблемы с конфигурацией CI/CD, зависимость от внешних сервисов.
   - **Митигирующие действия**: Регулярное тестирование инфраструктуры, резервные копии конфигураций, мониторинг состояния окружения.

## Интервальная оценка с учетом рисков в часах

- **Подготовка инфраструктуры (CI/CD, окружение)**: 3–6 часов  
  Учет времени на настройку Appveyor CI, интеграцию Allure и Gradle.

- **Написание автотестов (включая позитивные и негативные кейсы)**: 10–18 часов  
  Включает разработку, настройку генерации данных через JavaFaker и валидацию всех сценариев.

- **Тестирование, отладка и документирование**: 7–12 часов  
  Включает анализ результатов, исправление ошибок в тестах и создание отчетов.

**Общая оценка**: 20–36 часов.

## План сдачи работ

1. **Автотесты**: Завершение разработки и выполнения тестов до **25 января**.
2. **Результаты тестирования**: Представление отчета о прохождении тестов, включая Allure-отчеты, до **27 января**.
3. **Отчет по автоматизации**: Полный отчет по проведенной работе с указанием используемых инструментов, покрытых сценариев и выявленных ошибок — до **29 января**.
